## 技术方案全景

Paddle.js包含离线模块和在线模块，离线模块负责线下模型处理，在线部分主要负责神经网络计算推理。

用户在拿到模型之后，首先进行模型处理。因为在浏览器中需要使用到浏览器友好的模型格式，用户可通过 Paddle.js 提供的模型工具链对模型格式进行转换和离线优化。通过算子融合等手段初步进行模型优化处理，减少模型体积。用户也可贡献模型至官网。

在模型处理完成之后会进行到在线推理模块，首先用户需选取一个计算方案，调用CPU或GPU算力，进行计算加速。Paddle.js目前支持WebGL、WebGPU、WASM、Plain JS及NodeGL backend，用户可根据自己的模型及落地场景选择合适的计算方案。同时用户将上传数据，Paddle.js目前支持的用户输入包括图片及视频流，在获取完用户输入并完成模型加载及初始化之后，用户需要进行模型前处理，包含对图像进行resize、像素填充、数据归一化等操作，将用户输入转换成二进制浮点数据，把用户的输入变成符合模型要求的输入格式。下一步用户将开始进行神经网络计算，生成神经网络拓扑图，并进入算子生成器，将神经网络每一层算子构建成可执行的单元。如用户选择了不同的计算方案，算子将会在不同的设备层（CPU或GPU）上执行，最后通过神经网络层层计算得出推理结果，最后进行模型后处理。用户可使用Paddlejs-mediapipe工具更加快速便捷的进行前后处理。Paddle.js同时提供封装好的模型工程库，通过paddlejs-models模块使用简易API快速进行场景落地。如需性能数据，也可使用paddlejs-benchmark性能工具，产出benchmark报告，评估模型及算子的推理耗时。

Paddle.js代码深度精简，采用了多种技术手段针对神经网络执行效率和算子计算性能进行了系统性的优化，保证达到在浏览器上实时执行效果流畅无卡顿。

<p align="center"><img width="774" alt="arch" src="https://user-images.githubusercontent.com/76191671/125030616-f774cd80-e0bd-11eb-948d-b03fef99a0e9.png"></p>